/* TRON: Legacy Style Overrides */

/* TRON ARES Red color variables */
:root {
  --tron-bg: #070306; /* near-black base */
  --tron-panel: #000000; /* panel/input backgrounds */
  --tron-red: #ff0033; /* TRON ARES primary red */
  --tron-red-glow: #ff3366; /* lighter/glow red */
  --tron-red-weak: #ff003322; /* translucent red for borders */
  --tron-red-40: #ff003340; /* semi-transparent for shadows */
  --tron-text: #ffecec; /* warm off-white text */
}

/* Global Body and Font */
body {
  width: 350px; /* Slightly wider for better UI */
  padding: 16px;
  font-family: "Consolas", "Monaco", monospace; /* Techy monospace font */
  background-color: var(--tron-bg); /* Very dark base */
  color: var(--tron-text); /* Warm light text */
  line-height: 1.4;
  border: 1px solid var(--tron-red-weak); /* Subtle red border around the popup */
  border-radius: 6px;
}

/* Headings/Titles (If applicable, not in original CSS, but good practice) */
h2 {
  color: var(--tron-red); /* Neon Red Accent */
  text-shadow: 0 0 6px var(--tron-red-glow); /* Glow effect */
  margin-top: 0;
}

/* Input/Textarea Styling (The Grid Console) */
textarea {
  width: 100%;
  min-height: 100px;
  padding: 12px;
  margin-bottom: 16px;
  box-sizing: border-box;

  /* TRON Styling */
  background-color: var(--tron-panel); /* Pure black input background */
  color: var(--tron-red); /* Neon typing color (red) */
  border: 1px solid var(--tron-red-weak); /* Light red border */
  border-radius: 4px;
  resize: vertical;
  font-size: 14px;
  outline: none;
  transition: border-color 0.2s, box-shadow 0.2s;
}
textarea:focus {
  border-color: var(--tron-red); /* Intense red border on focus */
  box-shadow: 0 0 12px var(--tron-red-40); /* Subtle red glow on focus */
}

/* Response Area (The Output Display) */
#response {
  margin-top: 16px;
  padding: 12px;
  min-height: 50px;
  background-color: var(--tron-bg); /* Match body background */
  color: var(--tron-text);
  border: 1px solid var(--tron-red-weak);
  border-radius: 4px;
  white-space: pre-wrap;
  box-shadow: 0 0 8px var(--tron-red-40); /* Light red box shadow for glow */
}

/* Button Styling (The Call to Action) */
button {
  padding: 10px 14px;
  background-color: var(--tron-bg); /* Dark background */
  color: var(--tron-red); /* Neon red text */
  border: 1px solid var(--tron-red); /* Strong neon red border */
  cursor: pointer;
  border-radius: 4px;
  font-size: 14px;
  text-transform: uppercase;
  transition: background-color 0.2s, box-shadow 0.2s;
}
button:hover {
  background-color: var(--tron-red-weak); /* Very subtle red glow on hover */
  box-shadow: 0 0 16px var(--tron-red); /* Stronger red glow */
}
button:active {
  background-color: #ff003344; /* Pressed effect (red translucent) */
}
button[disabled] {
  opacity: 0.5;
  color: #e0ffff; /* Keep the color light */
  border-color: #e0ffff33;
  background-color: #0a1c29;
  box-shadow: none;
  cursor: default;
}

/* TRON Light Cycle Loading Animation */
@keyframes lightCycle {
  0% {
    clip-path: polygon(0 0, 0 0, 0 100%, 0 100%);
    border-color: var(--tron-red);
  }
  15% {
    clip-path: polygon(0 0, 100% 0, 100% 0, 0 0);
    border-color: var(--tron-red-glow);
  }
  35% {
    clip-path: polygon(100% 0, 100% 0, 100% 100%, 100% 0);
    border-color: var(--tron-red);
  }
  50% {
    clip-path: polygon(100% 0, 100% 100%, 100% 100%, 100% 100%);
    border-color: var(--tron-red-glow);
  }
  65% {
    clip-path: polygon(100% 100%, 100% 100%, 0 100%, 100% 100%);
    border-color: var(--tron-red);
  }
  85% {
    clip-path: polygon(0 100%, 0 100%, 0 0, 0 100%);
    border-color: var(--tron-red-glow);
  }
  100% {
    clip-path: polygon(0 0, 0 0, 0 100%, 0 100%);
    border-color: var(--tron-red);
  }
}

@keyframes trailEffect {
  0% {
    transform: scaleX(0.3);
    opacity: 1;
  }
  100% {
    transform: scaleX(1);
    opacity: 0;
  }
}

@keyframes glowPulse {
  0% {
    opacity: 0.3;
    filter: blur(3px);
  }
  50% {
    opacity: 1;
    filter: blur(5px);
  }
  100% {
    opacity: 0.3;
    filter: blur(3px);
  }
}

.loading-box {
  position: absolute;
  inset: -2px;
  border: 2px solid var(--tron-red);
  border-radius: 6px;
  animation: lightCycle 2.5s cubic-bezier(0.4, 0, 0.2, 1) infinite;
  pointer-events: none;
  box-shadow: 0 0 12px var(--tron-red-40);
}

.loading-box::before,
.loading-box::after {
  content: "";
  position: absolute;
  inset: -2px;
  border: 2px solid var(--tron-red);
  border-radius: 6px;
  opacity: 0.8;
}

.loading-box::before {
  filter: blur(4px);
  animation: glowPulse 2s ease-in-out infinite;
  opacity: 0.7;
}

.loading-box::after {
  border-width: 3px;
  filter: blur(8px);
  animation: trailEffect 1.5s ease-out infinite;
  transform-origin: left;
}

/* Typing Loading Animation */
@keyframes typeLoading {
  0% {
    content: "loading";
  }
  25% {
    content: "loading.";
  }
  50% {
    content: "loading..";
  }
  75% {
    content: "loading...";
  }
  100% {
    content: "loading";
  }
}

#status.loading {
  position: relative;
  color: var(--tron-red);
}

#status.loading::after {
  content: "";
  animation: typeLoading 1.5s steps(1) infinite;
  position: absolute;
  left: 0;
  color: inherit;
}

/* Other Utilities */
.controls {
  display: flex;
  gap: 8px;
  margin-bottom: 8px;
}
.msg {
  /* Keeping the box design for readability, but TRON ARES-themed */
  background: #000000;
  border: 1px solid var(--tron-red-weak);
  border-radius: 4px;
  padding: 8px 10px;
  margin: 6px 0;
  box-shadow: 0 0 4px var(--tron-red-40);
}
#status.muted {
  color: var(--tron-red-glow);
  font-size: 0.9em;
}

/* @keyframes blink is retained from your original CSS and will make the glow effect pulse */
@keyframes blink {
  /* ... */
}

/* Response bubble for better readability */
.msg {
  background: #fff;
  border-radius: 8px;
  padding: 8px 10px;
  margin: 6px 0;
  box-shadow: 0 1px 0 rgba(0, 0, 0, 0.03);
}

/* New CSS for animated dots */
@keyframes blink {
  0% {
    opacity: 0.2;
  }
  20% {
    opacity: 1;
  }
  100% {
    opacity: 0.2;
  }
}
.loading-dot {
  font-size: 1.5em;
  animation-name: blink;
  animation-duration: 1.4s;
  animation-iteration-count: infinite;
  animation-fill-mode: both;
}
.loading-dot:nth-child(2) {
  animation-delay: 0.2s;
}
.loading-dot:nth-child(3) {
  animation-delay: 0.4s;
}
